(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[11],{46875:(e,t,a)=>{Promise.resolve().then(a.bind(a,23488))},23488:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>d});var s=a(57437),r=a(97831),i=a(67671),n=a(62121),o=a(8284),l=a(67623),c=a(76758),h=a(2265),u=a(16463);function d(){let[e,t]=h.useState(!1),[a,d]=h.useState(!1),[p,m]=h.useState(""),[g,f]=h.useState(""),[y,b]=h.useState(""),[v,w]=h.useState(""),[k,S]=h.useState(""),[x,T]=h.useState(""),[A,E]=h.useState(!1),I=(0,u.useRouter)(),j=[{id:"uppercase",label:"At least one uppercase letter",check:e=>/[A-Z]/.test(e)},{id:"lowercase",label:"At least one lowercase letter",check:e=>/[a-z]/.test(e)},{id:"digit",label:"At least one digit",check:e=>/\d/.test(e)},{id:"special",label:"At least one special character",check:e=>/[\W_]/.test(e)},{id:"minLength",label:"Minimum length of 6 characters",check:e=>e.length>=6}],C=async()=>{E(!0);try{await i.Z.register(x,p,g,y,v,k),I.push("/profile")}catch(e){console.error("Registration failed:",e)}finally{E(!1)}},P=e=>e.match(/^[A-Z0-9._%+-]+@[A-Z0-9.-]+.[A-Z]{2,4}$/i),U=h.useMemo(()=>""!==p&&!P(p),[p]),Z=h.useMemo(()=>j.filter(e=>!e.check(g)).length>0,[g]),N=h.useMemo(()=>g!==y,[g,y]),O=j.filter(e=>e.check(g)).map(e=>e.id);return(0,s.jsxs)("div",{children:[(0,s.jsx)(n.Y,{label:"Email",type:"email",placeholder:"Enter your email",value:p,variant:"bordered",isInvalid:U,color:U?"danger":"default",onValueChange:m}),(0,s.jsx)(n.Y,{label:"Username",type:"text",placeholder:"Enter your Username",value:x,variant:"bordered",onValueChange:T}),(0,s.jsx)(n.Y,{label:"Forname",type:"text",placeholder:"Enter your name",value:v,variant:"bordered",onValueChange:w}),(0,s.jsx)(n.Y,{label:"Surname",type:"text",placeholder:"Enter your name",value:k,variant:"bordered",onValueChange:S}),(0,s.jsx)(n.Y,{label:"Password",type:e?"text":"password",value:g,variant:"bordered",isInvalid:!!g&&Z,placeholder:"Enter your password",onValueChange:f,endContent:(0,s.jsx)(o.A,{isIconOnly:!0,onClick:()=>t(!e),children:(0,s.jsx)(r.Z,{name:"search"})})}),(0,s.jsx)(n.Y,{label:"Verify Password",type:a?"text":"password",placeholder:"Enter your password",value:y,variant:"bordered",onValueChange:b,isInvalid:N,color:N?"danger":"default",endContent:(0,s.jsx)(o.A,{isIconOnly:!0,onClick:()=>d(!a),children:(0,s.jsx)(r.Z,{name:"search"})})}),(0,s.jsx)(o.A,{onClick:C,disabled:A,children:A?"Registering...":"Register"}),(0,s.jsx)("div",{className:"flex flex-col gap-3",children:(0,s.jsx)(l.X,{value:O,isDisabled:!0,children:j.map(e=>(0,s.jsx)(c.K,{value:e.id,radius:"full",children:e.label},e.id))})})]})}},97831:(e,t,a)=>{"use strict";a.d(t,{Z:()=>r});var s=a(57437);let r=e=>{let{name:t,className:a="",style:r,size:i}=e;return(0,s.jsx)("span",{className:"material-symbols-rounded ".concat(a),style:{fontSize:i,...r},children:t})}},59331:(e,t,a)=>{"use strict";a.d(t,{Z:()=>r});class s{static getInstance(){return s.instance||(s.instance=new s),s.instance}setUser(e,t,a,s,r,i,n,o){this.user={id:e,username:t,firstName:a,lastName:s,email:r,profileImageUrl:i,uuid:n,token:o},sessionStorage.setItem("user",JSON.stringify(this.user))}getUser(){return this.user}isAuthenticated(){return null!==this.user}clearUser(){this.user=null,sessionStorage.removeItem("user")}constructor(){if(this.user=null,window.sessionStorage){let e=sessionStorage.getItem("user");e&&(this.user=JSON.parse(e))}else console.warn("sessionStorage is not available in this environment.")}}let r=s},67671:(e,t,a)=>{"use strict";a.d(t,{Z:()=>i});var s=a(59331);class r{setToken(e,t){this.token=e;let a=new Date().getTime()+t;sessionStorage.setItem("authToken",e),sessionStorage.setItem("authTokenExpiration",a.toString())}clearToken(){this.token=null,sessionStorage.removeItem("authToken"),sessionStorage.removeItem("authTokenExpiration")}async fetchApi(e){let{method:t="GET",body:a,headers:s={}}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r="".concat(this.baseUrl,"/").concat(e),i=a instanceof FormData,n={method:t,headers:{...s,...this.token?{Authorization:"Bearer ".concat(this.token)}:{},"Content-Type":s["Content-Type"]||"application/json"},body:i?a:a?JSON.stringify(a):void 0},o=await fetch(r,n);if(!o.ok)throw n.body&&console.log(n.body),console.log(await o.text()),Error("Failed to fetch: ".concat(o.json()));return o.json()}async login(e,t){let{token:a,expiresIn:r}=await this.fetchApi("auth/login",{method:"POST",body:{email:e,password:t}});this.setToken(a,r);let i=await this.fetchApi("auth/me",{method:"GET",headers:{Authorization:"Bearer ".concat(a)}});s.Z.getInstance().setUser(i.id,i.username,i.firstName,i.lastName,i.email,i.profileImageUrl,i.uuid,a)}async register(e,t,a,r,i,n,o){if(await this.fetchApi("auth/register",{method:"POST",body:{firstName:i,lastName:n,username:e,password:a,confirmPassword:r,email:t}}),await this.login(t,a),o){let e=new FormData;e.append("profileImage",o),await this.fetchApi("upload-profile-image",{method:"POST",body:e,headers:{"Content-Type":"multipart/form-data"}});let t=await this.fetchApi("auth/me",{method:"GET",headers:{Authorization:"Bearer ".concat(this.token)}});s.Z.getInstance().setUser(t.id,t.username,t.firstName,t.lastName,t.email,t.profileImageUrl,t.uuid,this.token)}}async logout(){try{var e;(null===(e=s.Z.getInstance().getUser())||void 0===e?void 0:e.token)&&await this.fetchApi("auth/logout",{method:"POST"})}catch(e){console.error("Failed to log out on server:",e)}s.Z.getInstance().clearUser(),this.clearToken(),window.location.href="/login"}async get(e,t){return this.fetchApi(e,{method:"GET",headers:t})}async post(e,t,a){return this.fetchApi(e,{method:"POST",body:t,headers:a})}async put(e,t,a){return this.fetchApi(e,{method:"PUT",body:t,headers:a})}async delete(e,t){return this.fetchApi(e,{method:"DELETE",headers:t})}constructor(e){if(this.token=null,!e)throw Error("API base URL is not defined.");this.baseUrl=e;{let e=sessionStorage.getItem("authToken"),t=sessionStorage.getItem("authTokenExpiration");e&&t&&new Date().getTime()<Number(t)?this.token=e:this.clearToken()}}}let i=new r("https://localhost/apiProd/api")},13354:(e,t,a)=>{"use strict";a.d(t,{S:()=>o,T:()=>l});var s=a(22173),r=a(2265),i=a(8381);let n={border:0,clip:"rect(0 0 0 0)",clipPath:"inset(50%)",height:"1px",margin:"-1px",overflow:"hidden",padding:0,position:"absolute",width:"1px",whiteSpace:"nowrap"};function o(e={}){let{style:t,isFocusable:a}=e,[s,l]=(0,r.useState)(!1),{focusWithinProps:c}=(0,i.L)({isDisabled:!a,onFocusWithinChange:e=>l(e)}),h=(0,r.useMemo)(()=>s?t:t?{...n,...t}:n,[s]);return{visuallyHiddenProps:{...c,style:h}}}function l(e){let{children:t,elementType:a="div",isFocusable:i,style:n,...l}=e,{visuallyHiddenProps:c}=o(e);return r.createElement(a,(0,s.d)(l,c),t)}}},e=>{var t=t=>e(e.s=t);e.O(0,[284,121,375,130,268,744],()=>t(46875)),_N_E=e.O()}]);
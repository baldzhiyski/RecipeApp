(()=>{var e={};e.id=686,e.ids=[686],e.modules={20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},209:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},79348:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},30412:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},55315:e=>{"use strict";e.exports=require("path")},17360:e=>{"use strict";e.exports=require("url")},35317:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>i.a,__next_app__:()=>h,pages:()=>d,routeModule:()=>p,tree:()=>c});var r=s(49442),n=s(10042),a=s(48190),i=s.n(a),l=s(63289),o={};for(let e in l)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>l[e]);s.d(t,o);let c=["",{children:["recipes",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,54958)),"C:\\Projects\\team-2\\frontend\\src\\app\\recipes\\page.tsx"]}]},{metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,73881))).default(e)],apple:[],openGraph:[],twitter:[],manifest:"/manifest.webmanifest"}}]},{layout:[()=>Promise.resolve().then(s.bind(s,11112)),"C:\\Projects\\team-2\\frontend\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,6042,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,73881))).default(e)],apple:[],openGraph:[],twitter:[],manifest:"/manifest.webmanifest"}}],d=["C:\\Projects\\team-2\\frontend\\src\\app\\recipes\\page.tsx"],h={require:s,loadChunk:()=>Promise.resolve()},p=new r.AppPageRouteModule({definition:{kind:n.RouteKind.APP_PAGE,page:"/recipes/page",pathname:"/recipes",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},45056:(e,t,s)=>{Promise.resolve().then(s.bind(s,54958))},51303:(e,t,s)=>{Promise.resolve().then(s.bind(s,78877))},78877:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>T});var r,n,a,i=s(20149),l=s(63606),o=s(17534),c=s(43688),d=s(99040),h=s(53203),p=s(39581),u=s(24691),m=s(50619),x=s(92484),g=s(77894),f=s(62100);let j=({isOpen:e,onClose:t,recipe:s})=>(0,i.jsx)(u.R,{isOpen:e,placement:"center",onClose:t,isDismissable:!0,children:(0,i.jsxs)(m.A,{className:"text-black",children:[(0,i.jsx)(x.k,{children:(0,i.jsx)("h2",{children:s.recipeName})}),(0,i.jsxs)(g.I,{children:[(0,i.jsx)("p",{children:s.description}),(0,i.jsxs)("p",{children:["Meal Type: ",s.mealType]}),(0,i.jsxs)("p",{children:["Dish Type: ",s.dishType]}),(0,i.jsxs)("p",{children:["Dietary Preference: ",s.dietaryPreference]}),(0,i.jsxs)("p",{children:["Created by: ",s.creatorUsername]}),(0,i.jsx)("h4",{children:"Ingredients:"}),(0,i.jsx)("ul",{children:s.recipeIngredients?.map((e,t)=>i.jsxs("li",{children:[e.amount," ",e.unit," of"," ",e.ingredientName]},t))}),(0,i.jsx)("h4",{children:"Instructions:"}),(0,i.jsx)("p",{children:s.instructions})]}),(0,i.jsx)(f.R,{children:(0,i.jsx)(p.A,{className:"bg-danger",onClick:t,children:"Close"})})]})}),v=({recipe:e})=>{let[t,s]=(0,l.useState)(!1);return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(d.w,{children:(0,i.jsxs)(h.G,{children:[(0,i.jsx)("div",{className:"w-full text-center content-center",children:e.recipeName}),(0,i.jsx)("div",{children:e.description}),(0,i.jsxs)("div",{children:["Meal Type: ",e.mealType]}),(0,i.jsxs)("div",{children:["Dish Type: ",e.dishType]}),(0,i.jsxs)("div",{children:["Recipe created by: ",e.creatorUsername]}),(0,i.jsx)(p.A,{onClick:()=>{s(!0)},children:"View Recipe"})]})}),(0,i.jsx)(j,{isOpen:t,onClose:()=>{s(!1)},recipe:e})]})};var E=s(57801),A=s(58311),y=s(87238),N=s(10663);(function(e){e.VEGETARIAN="VEGETARIAN",e.NON_VEGETARIAN="NON_VEGETARIAN",e.VEGAN="VEGAN",e.GLUTEN_FREE="GLUTEN_FREE"})(r||(r={})),function(e){e.BREAKFAST="BREAKFAST",e.LUNCH="LUNCH",e.DINNER="DINNER",e.SNACK="SNACK"}(n||(n={}));class b{constructor(e,t,s){this.amount=e,this.unit=t,this.ingredientName=s}toString(){return`${this.amount} ${this.unit} of ${this.ingredientName}`}}!function(e){e[e.APPETIZER=0]="APPETIZER",e[e.MAIN_COURSE=1]="MAIN_COURSE",e[e.SIDE_DISH=2]="SIDE_DISH",e[e.DESSERT=3]="DESSERT",e[e.SNACK=4]="SNACK",e[e.BEVERAGE=5]="BEVERAGE",e[e.STREET_FOOD=6]="STREET_FOOD"}(a||(a={}));let S=({isOpen:e,onClose:t})=>{let[s,o]=(0,l.useState)(""),[d,h]=(0,l.useState)(""),[j,v]=(0,l.useState)(null),[S,T]=(0,l.useState)(null),[C,I]=(0,l.useState)(null),[R,k]=(0,l.useState)(""),[w,P]=(0,l.useState)([]),[_,D]=(0,l.useState)(!1),G=(e,t,s)=>{P(r=>r.map((r,n)=>n===e?{...r,[t]:s}:r))},O=e=>{P(t=>t.filter((t,s)=>s!==e))},U=()=>""!==s&&""!==d&&null!==j&&null!==C&&""!==R&&w.every(e=>""!==e.ingredientName&&e.amount>0&&null!==e.unit),F=async()=>{if(!U())return;D(!0);let e=w.map(e=>({name:e.ingredientName,amount:e.amount,unit:e.unit}));try{c.Z.post("recipes/add",{ingredientsList:e,dishType:S,mealType:j,dietaryPreference:C,recipeName:s,description:d,instructions:R})}catch(e){console.error("Failed to upload recipe:",e)}D(!1),t()};return(0,i.jsx)(u.R,{isOpen:e,placement:"center",onClose:t,children:(0,i.jsxs)(m.A,{className:"text-black",children:[(0,i.jsx)(x.k,{children:(0,i.jsx)("h2",{children:"New Recipe!"})}),(0,i.jsxs)(g.I,{children:[(0,i.jsx)(E.Y,{label:"Recipe Name",placeholder:"Recipe Name",value:s,isInvalid:""===s,onValueChange:o}),(0,i.jsx)(A.g,{label:"Dish Type",placeholder:"Select Dish type",value:S||"",onChange:e=>T(e.target.value),children:Object.values(a).map(e=>(0,i.jsx)(y.R,{value:e,children:e},e))}),(0,i.jsx)(A.g,{label:"Meal Type",placeholder:"Select meal type",value:j||"",onChange:e=>v(e.target.value),children:Object.values(n).map(e=>(0,i.jsx)(y.R,{value:e,children:e},e))}),(0,i.jsx)(A.g,{label:"Dietary Preference",placeholder:"Select dietary preference",value:C||"",onChange:e=>I(e.target.value),children:Object.values(r).map(e=>(0,i.jsx)(y.R,{value:e,children:e},e))}),(0,i.jsx)(N.Y,{value:d,onValueChange:h,placeholder:"Description",isInvalid:""===d}),(0,i.jsx)(N.Y,{label:"Instructions",placeholder:"How to make this recipe",value:R,onValueChange:k,isInvalid:""===R}),(0,i.jsxs)("div",{className:"mt-4",children:[(0,i.jsx)("h3",{children:"Ingredients"}),w.map((e,t)=>(0,i.jsxs)("div",{className:"flex items-center gap-4 mt-2",children:[(0,i.jsx)(E.Y,{label:"Name",placeholder:"Ingredient name",value:e.ingredientName,onValueChange:e=>G(t,"ingredientName",e)}),(0,i.jsx)(E.Y,{label:"Amount",placeholder:"Amount",type:"number",min:"0",value:e.amount.toString(),onValueChange:e=>G(t,"amount",parseFloat(e))}),(0,i.jsx)(E.Y,{label:"Unit",placeholder:"Your unit",value:e.unit,onValueChange:e=>G(t,"unit",e)}),(0,i.jsx)(p.A,{className:"bg-danger",onClick:()=>O(t),children:"Remove"})]},t)),(0,i.jsx)(p.A,{onClick:()=>{P(e=>[...e,new b(0,"","")])},className:"mt-4 bg-primary",children:"+ Add Ingredient"})]})]}),(0,i.jsxs)(f.R,{children:[(0,i.jsx)(p.A,{className:"bg-success",onClick:F,disabled:!U(),children:_?"Uploading...":"Save"}),(0,i.jsx)(p.A,{className:"bg-danger",onClick:t,children:"Close"})]})]})})},T=()=>{let[e,t]=(0,l.useState)([]),[s,r]=(0,l.useState)(!0),[n,a]=(0,l.useState)(!1);return((0,l.useEffect)(()=>{(async()=>{try{let e=await c.Z.get("recipes");t(e)}catch(e){console.error("Failed to fetch recipes:",e)}finally{r(!1)}})()},[]),s)?(0,i.jsx)("p",{className:"text-center mt-10",children:"Loading recipes..."}):(0,i.jsxs)(o.Z,{children:[(0,i.jsxs)("div",{className:"container mx-auto px-4 py-10",children:[(0,i.jsx)("div",{className:"text-2xl font-bold text-center mb-6",children:"All Recipes"}),(0,i.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:e.map((e,t)=>(0,i.jsx)(v,{recipe:e},t))})]}),(0,i.jsx)(p.A,{onClick:()=>{a(!0)},children:"Create Recipe"}),(0,i.jsx)(S,{isOpen:n,onClose:()=>{a(!1)}})]})}},17534:(e,t,s)=>{"use strict";s.d(t,{Z:()=>l});var r=s(20149),n=s(63606),a=s(37624),i=s(39581);let l=({children:e})=>{let[t,s]=(0,n.useState)(!0),[l,o]=(0,n.useState)(!1);return((0,n.useEffect)(()=>{a.Z.getInstance().getUser()?o(!0):o(!1),s(!1)},[]),t)?(0,r.jsx)("div",{children:"Loading..."}):l?(0,r.jsx)(r.Fragment,{children:e}):(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{children:"You are not logged in."}),(0,r.jsx)(i.A,{onClick:()=>window.location.href="/login",children:"Go to Login"})]})}},43688:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});var r=s(37624);class n{constructor(e){if(this.token=null,!e)throw Error("API base URL is not defined.");this.baseUrl=e}setToken(e,t){this.token=e;let s=new Date().getTime()+t;sessionStorage.setItem("authToken",e),sessionStorage.setItem("authTokenExpiration",s.toString())}clearToken(){this.token=null,sessionStorage.removeItem("authToken"),sessionStorage.removeItem("authTokenExpiration")}async fetchApi(e,{method:t="GET",body:s,headers:r={}}={}){let n=`${this.baseUrl}/${e}`,a=s instanceof FormData,i={method:t,headers:{...r,...this.token?{Authorization:`Bearer ${this.token}`}:{},"Content-Type":r["Content-Type"]||"application/json"},body:a?s:s?JSON.stringify(s):void 0},l=await fetch(n,i);if(!l.ok)throw i.body&&console.log(i.body),console.log(await l.text()),Error(`Failed to fetch: ${l.json()}`);return l.json()}async login(e,t){let{token:s,expiresIn:n}=await this.fetchApi("auth/login",{method:"POST",body:{email:e,password:t}});this.setToken(s,n);let a=await this.fetchApi("auth/me",{method:"GET",headers:{Authorization:`Bearer ${s}`}});r.Z.getInstance().setUser(a.id,a.username,a.firstName,a.lastName,a.email,a.profileImageUrl,a.uuid,s)}async register(e,t,s,n,a,i,l){if(await this.fetchApi("auth/register",{method:"POST",body:{firstName:a,lastName:i,username:e,password:s,confirmPassword:n,email:t}}),await this.login(t,s),l){let e=new FormData;e.append("profileImage",l),await this.fetchApi("upload-profile-image",{method:"POST",body:e,headers:{"Content-Type":"multipart/form-data"}});let t=await this.fetchApi("auth/me",{method:"GET",headers:{Authorization:`Bearer ${this.token}`}});r.Z.getInstance().setUser(t.id,t.username,t.firstName,t.lastName,t.email,t.profileImageUrl,t.uuid,this.token)}}async logout(){try{r.Z.getInstance().getUser()?.token&&await this.fetchApi("auth/logout",{method:"POST"})}catch(e){console.error("Failed to log out on server:",e)}r.Z.getInstance().clearUser(),this.clearToken()}async get(e,t){return this.fetchApi(e,{method:"GET",headers:t})}async post(e,t,s){return this.fetchApi(e,{method:"POST",body:t,headers:s})}async put(e,t,s){return this.fetchApi(e,{method:"PUT",body:t,headers:s})}async delete(e,t){return this.fetchApi(e,{method:"DELETE",headers:t})}}let a=new n("https://localhost/apiProd/api")},54958:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>r});let r=(0,s(78105).registerClientReference)(function(){throw Error("Attempted to call the default export of \"C:\\\\Projects\\\\team-2\\\\frontend\\\\src\\\\app\\\\recipes\\\\page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"C:\\Projects\\team-2\\frontend\\src\\app\\recipes\\page.tsx","default")},73881:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>n});var r=s(15394);let n=async e=>[{type:"image/x-icon",sizes:"16x16",url:(0,r.fillMetadataSegment)(".",await e.params,"favicon.ico")+""}]}};var t=require("../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[492,611,394,703],()=>s(35317));module.exports=r})();